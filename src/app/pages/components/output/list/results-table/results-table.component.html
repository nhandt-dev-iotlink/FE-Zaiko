<div class="table-inventory-output">
  <div class="list-frame-title">
    <div class="flex-center">
      <span>検索結果一覧</span>
    </div>
    <div class="total-list">
      <p>検索結果一覧 総計 <span>0 / 100</span> 件</p>
    </div>
  </div>
  <div class="list-data" [ngStyle]="{ 'height': isHeightLimited ? '240px' : 'auto' }">
    <table class="table align-middle" *ngIf="data.length > 0; else emptyInventory">
      <thead class="bg-light sticky-top">
        <tr>
          <th>&nbsp;</th>
          <th>No</th>
          <th>伝票番号</th>
          <th>出庫タイプ</th>
          <th>受注日</th>
          <th>バッチ</th>
          <th class="pt-2">
            <p>出庫予定日</p>
            <p>出庫実績日</p>
          </th>
          <th class="pt-2">
            <p>作業予定日</p>
            <p>作業実績日</p>
          </th>
          <th class="pt-2">
            <p>納品予定日</p>
            <p>納品実績日</p>
          </th>
          <th class="pt-2">
            <p>予定納品先名称</p>
            <p>実績納品先名称</p>
          </th>
          <th class="pt-2">
            <p>予定出荷先</p>
            <p>実績出荷先</p>
          </th>
          <th class="pt-2">
            <p>予定倉庫</p>
            <p>実績倉庫</p>
          </th>
          <th class="pt-2">
            <p>予定客先伝票番号</p>
            <p>実績客先伝票番号</p>
          </th>
          <th class="pt-2">
            <p>予定数量合計</p>
            <p>実績数量合計</p>
          </th>
          <th>&nbsp;</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of content ; let i = index">
          <td class="alert-info">
            <mat-icon class="icon-lock" svgIcon="icon-lock" *ngIf="item.closed === '1'"></mat-icon>
            <mat-icon class="icon-unlock" svgIcon="icon-unlock" *ngIf="item.closed === '0'"></mat-icon>
            {{
            item.outputStatus === '0' ? '未入' :
            item.outputStatus === '1' ? '残' :
            item.outputStatus === '2' ? '済' :
            ''
            }}
          </td>
          <td>{{ i + 1 }}</td>
          <td>{{ item.slipNo }}</td>
          <td>
            <p class="alert alert-primary" *ngIf="item.planOutputDate">予定あり</p>
            <p class="alert alert-primary" *ngIf="!item.planOutputDate">実績のみ</p>
          </td>
          <td>{{ item.orderDate }}</td>
          <td>
            <p *ngIf="item.batchStatus === '0'" class="alert alert-warning">未処理</p>

            <p *ngIf="item.batchStatus === '1'" class="alert alert-warning">処理中</p>

            <p *ngIf="item.batchStatus === '2'" class="alert alert-warning">処理済み</p>

            <p *ngIf="item.batchStatus === '3'" class="alert alert-warning">処理中 <br> 　未あり</p>

          </td>

          <td>
            <p>{{ item.actualOutputDate || '--' }}</p>
            <p>{{item.planOutputDate || '--' }}</p>
          </td>
          <td>
            <p>{{ item.planWorkingDate || '--' }}</p>
            <p>{{item.actualOutputDate || '--' }}</p>
          </td>
          <td>
            <p>{{item.planDeliverDate || '--' }}</p>
            <p>{{item.actualDeliverDate || '--' }}</p>
          </td>

          <td>
            <p>{{item.deliveryDestinationCode || '--' }}</p>
            <p>{{item.departmentName || '--' }}</p>
          </td>
          <td>
            <p>{{item.actualSupplierSlipNo || '--' }}</p>
            <p>{{item.supplierCode || '--' }}</p>
          </td>
          <td>
            <p>{{item.repositoryName || '--' }}</p>
            <p>{{item.repositoryCode || '--' }}</p>
          </td>
          <td>
            <p>{{item.planSupplierSlipNo || '--' }}</p>
            <p>{{item.actualSupplierSlipNo || '--' }}</p>
          </td>
          <td>
            <p>{{item.sumPlanQuantity || '--' }}</p>
            <p>{{item.sumActualQuantity || '--' }}</p>
          </td>
          <td class="group-btn sticky">
            <!-- Button "予定" is disabled if planOutputDate is null -->
            <button type="button" class="btn" style="color:#FFFFFF !important; background-color: #00AEC8;"
              [disabled]="!item.planOutputDate">
              予定
            </button>
            <button type="button" class="btn" style="color:#FFFFFF !important; background-color: #00B5AD;" [disabled]="
                    (item.planOutputDate && !item.actualOutputDate && item.closed == '1') || 
                    (item.planOutputDate && item.actualOutputDate && item.closed == '1') ||   
                    (!item.planOutputDate && item.actualOutputDate && item.closed == '0') ||  
                    (!item.planOutputDate && item.actualOutputDate && item.closed == '1') ||
                    (item.slipNo != null) 
                  ">
              実績
            </button>
            <button type="button" class="btn" style="color:#FFFFFF !important; background-color: #6B77B6;"
              [disabled]="!item.actualOutputDate">
              訂正
            </button>
          </td>

        </tr>

      </tbody>
    </table>
    <ng-template #emptyInventory>
      <p style="text-align: center;">No content available</p>
    </ng-template>

  </div>
  <div class="scroll-down">
    <button class="btn-down" *ngIf="totalPage > (currentPage+1)" (click)="triggerLoadMore()"> <mat-icon
        svgIcon="icon-show-more"></mat-icon> 更に表示</button>
  </div>


</div>