<div class="table-inventory-output">
  <div class="list-frame-title">
    <div class="flex-center">
      <span>検索結果一覧</span>
    </div>
    <div class="total-list">
      <p>検索結果一覧 総計 <span>{{data.results.length}} / {{data.totalRecords}}</span> 件</p>
    </div>
  </div>
  <div class="list-data" [ngStyle]="{ 'height': isHeightLimited ? '180px' : '500px' }">
    <table class="table align-middle" *ngIf="data.results.length > 0; else emptyInventory">
      <thead class="bg-light sticky-top">
        <tr>
          <th rowspan="2" class="sticky-col" scope="col">&nbsp;</th>
          <th rowspan="2" class="sticky-col-2 " scope="col">No</th>
          <th rowspan="2" class="sticky-col-3 " scope="col">伝票番号</th>
          <th rowspan="2" class="sticky-col-4 " scope="col">出庫タイプ</th>
          <th rowspan="2" class="sticky-col-5 " scope="col">受注日</th>
          <th rowspan="2" class="sticky-col-6" scope="col">バッチ</th>
          <th scope="col">出庫予定日</th>
          <th scope="col">実績出荷先</th>

          <th scope="col">作業予定日</th>
          <th scope="col">予定倉庫</th>

          <th scope="col">納品予定日</th>
          <th scope="col">実績客先伝票番号</th>

          <th scope="col">予定納品先名称</th>
          <th scope="col">実績数量合計</th>
          <th rowspan="2" class="sticky" scope="col">&nbsp;</th>
        </tr>
        <tr>
          <th scope="col">出庫実績日</th>
          <th scope="col">予定出荷先</th>

          <th scope="col">作業実績日</th>
          <th scope="col">実績倉庫</th>

          <th scope="col">納品実績日</th>
          <th scope="col">実績客先伝票番号</th>

          <th scope="col">予定数量合計</th>
          <th scope="col">予定納品先名称</th>

        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of data.results ; let i = index">
          <td class="alert-info sticky-td">
            <mat-icon class="icon-lock" svgIcon="icon-lock" *ngIf="item.closed === '1'"></mat-icon>
            <mat-icon class="icon-unlock" svgIcon="icon-unlock" *ngIf="item.closed === '0'"></mat-icon>
            {{
            item.outputStatus === '0' ? '未入' :
            item.outputStatus === '1' ? '残' :
            item.outputStatus === '2' ? '済' :
            ''
            }}
          </td>
          <td class="sticky-td-2">{{ i + 1 }}</td>
          <td class="sticky-td-3">{{ item.slipNo }}</td>
          <td class="sticky-td-4">
            <p class="alert alert-primary" *ngIf="item.planOutputDate">予定あり</p>
            <p class="alert alert-primary" *ngIf="!item.planOutputDate">実績のみ</p>
          </td>
          <td class="sticky-td-5">{{ item.orderDate }}</td>
          <td class="sticky-td-6">
            <p *ngIf="item.batchStatus === '0'" class="alert alert-warning">未処理</p>

            <p *ngIf="item.batchStatus === '1'" class="alert alert-warning">処理中</p>

            <p *ngIf="item.batchStatus === '2'" class="alert alert-warning">処理済み</p>

            <p *ngIf="item.batchStatus === '3'" class="alert alert-warning">処理中 <br> 　未あり</p>

          </td>
          <!--  sửa dung swc và ngtemlp hoặc tao 1 hàm  -->

          <td>
            <p>{{ item.actualOutputDate || '--' }}</p>
            <p>{{item.planOutputDate || '--' }}</p>
          </td>
          <td>
            <p>{{ item.planWorkingDate || '--' }}</p>
            <p>{{item.actualOutputDate || '--' }}</p>
          </td>
          <td>
            <p>{{item.planDeliverDate || '--' }}</p>
            <p>{{item.actualDeliverDate || '--' }}</p>
          </td>

          <td>
            <p>{{item.deliveryDestinationCode || '--' }}</p>
            <p>{{item.departmentName || '--' }}</p>
          </td>
          <td>
            <p>{{item.actualSupplierSlipNo || '--' }}</p>
            <p>{{item.supplierCode || '--' }}</p>
          </td>
          <td>
            <p>{{item.repositoryName || '--' }}</p>
            <p>{{item.repositoryCode || '--' }}</p>
          </td>
          <td>
            <p>{{item.planSupplierSlipNo || '--' }}</p>
            <p>{{item.actualSupplierSlipNo || '--' }}</p>
          </td>
          <td>
            <p>{{item.sumPlanQuantity || '--' }}</p>
            <p>{{item.sumActualQuantity || '--' }}</p>
          </td>
          <td class="group-btn sticky">

            <button type="button" class="btn btnPlan" [disabled]="!item.planOutputDate"
              (click)="Plan(item.inventoryOutputId!)"> 
              予定
            </button>

            <button type="button" class="btn enabled-button" [disabled]="isActualButtonDisabled(item)">
              実績
            </button>

            <button type="button" class="btn" style="color:#FFFFFF !important; background-color: #6B77B6;"
              [disabled]="!item.actualOutputDate">
              訂正
            </button>
          </td>

        </tr>

      </tbody>
    </table>
    <ng-template #emptyInventory>
      <p style="text-align: center;">表示するデータがありません</p>
    </ng-template>

  </div>
  <div class="loadMore">
    <div class="scroll-down">
      <button class="btn-down" *ngIf="data.totalPage > (data.currentPage+1)" (click)="triggerLoadMore()"> <mat-icon
          svgIcon="icon-show-more"></mat-icon> 更に表示</button>
    </div>

  </div>


</div>